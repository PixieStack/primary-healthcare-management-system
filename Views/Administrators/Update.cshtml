@model CodeMed.Areas.Identity.Data.CodeMedUser

<style>
    body {
        background-image: url("/content/Home/Delete.jpeg");
        background-repeat: no-repeat;
        background-size: cover;
        background-position: center;
    }
</style>


<form method="post" asp-action="Update">
    <input asp-for="Id" hidden />
    <div class="border p-3 mt-4">
        <div class="row pb-2">
            <header class="text-primary" style="font-size: 30px; font-weight: bold;">Delete Record</header>
            <hr />
        </div>
        <div asp-validation-summary="All"></div>


        <div class="mb-3">
            <label asp-for="Title">Title</label>
            <select asp-for="Title" class="form-control" autocomplete="Gender" aria-required="true" onchange="showGender(this)">
                <option value="">--Select Title--</option>
                <option value="Miss">Miss</option>
                <option value="Mrs">Mrs</option>
                <option value="Ms">Ms</option>
                <option value="Mr">Mr</option>
                <option value="Mx">Mx</option>
                <option value="Dr">Dr</option>
                <option value="Prof">Prof</option>
                <option value="Other">Other</option>
            </select>
            <span asp-validation-for="Title" class="text-danger"></span>
        </div>
        <div class="mb-3">
            <label asp-for="FirstName" style="font-size: 20px; font-weight: bold;"></label>
            <input asp-for="FirstName" style="width: 800px" class="form-control" />
        </div>
        <div class="mb-3">
            <label asp-for="LastName" style="font-size: 20px; font-weight: bold;"></label>
            <input asp-for="LastName" style="width: 800px" class="form-control" />
        </div>
        <div class="mb-3">
            <label asp-for="Gender" style="font-size: 20px; font-weight: bold;">Gender</label>
            <select asp-for="Gender" class="form-control" autocomplete="Gender" aria-required="true" onchange="showGender(this)">
                <option value="">--Select Gender--</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Transgender">Transgender</option>
                <option value="Non-Binary">Non-Binary</option>
                <option value="Prefer not to say">Prefer not to say</option>
            </select>
            <span asp-validation-for="Gender" class="text-danger"></span>
        </div>
        <div class="mb-3">
            <label asp-for="Email" style="font-size: 20px; font-weight: bold;"></label>
            <textarea asp-for="Email" style="width: 800px; resize: none;" class="form-control autoresize"></textarea>
        </div>
        <div class="mb-3">
            <label asp-for="Phone_Number" style="font-size: 20px; font-weight: bold;">Phone Number</label>
            <input asp-for="Phone_Number" id="phoneNumberInput" style="width: 800px" class="form-control" />
        </div>

        <div class="mb-3" >
        <label asp-for="Street_Address" style="font-size: 20px; font-weight: bold;">Street Address</label>
        <input asp-for="Street_Address" style="width: 800px" class="form-control" />
        </div>

        <div class="mb-3">
        <label asp-for="Surburb" style="font-size: 20px; font-weight: bold;">Surburb</label>
        <input asp-for="Surburb" style="width: 800px" class="form-control" />
        </div>

        <div class="mb-3">
        <label asp-for="City" style="font-size: 20px; font-weight: bold;">City</label>
        <input asp-for="City" style="width: 800px" class="form-control" />
        </div>

        <div class="mb-3">
        <label asp-for="Province" style="font-size: 20px; font-weight: bold;">Province</label>
        <select asp-for="Province" style="width: 800px" class="form-control" aria-required="true">
                <option value="">Select a province</option>
                <option value="Eastern Cape">Eastern Cape</option>
                <option value="Free State">Free State</option>
                <option value="Gauteng">Gauteng</option>
                <option value="KwaZulu-Natal">KwaZulu-Natal</option>
                <option value="Limpopo">Limpopo</option>
                <option value="Mpumalanga">Mpumalanga</option>
                <option value="North West">North West</option>
                <option value="Northern Cape">Northern Cape</option>
                <option value="Western Cape">Western Cape</option>
            </select>
        </div>

        <div class="mb-3">
            <label asp-for="Postal_Code" style="font-size: 20px; font-weight: bold;">Postal Code</label>
            <input asp-for="Postal_Code" class="form-control" autocomplete="username" aria-required="true" placeholder="postal code" />
            <span asp-validation-for="Postal_Code" class="text-danger"></span>
        </div>
        <div class="mb-3">
        <label asp-for="NextOfKinName" style="font-size: 20px; font-weight: bold;">Next Of Kin Name</label>
        <input asp-for="NextOfKinName" style="width: 800px" class="form-control" />
        </div>

        <div class="mb-3">
        <label asp-for="NextOfKinRelationship" style="font-size: 20px; font-weight: bold;">Next of Kin Relationship</label>
        <select asp-for="NextOfKinRelationship" style="width: 800px" class="form-control" autocomplete="off" aria-required="true">
                <option value="">--Select Relationship--</option>
                <option value="Parent">Parent</option>
                <option value="Sibling">Sibling</option>
                <option value="Spouse">Spouse</option>
                <option value="Child">Child</option>
                <option value="Grandparent">Grandparent</option>
                <option value="Friend">Friend</option>
                <option value="Other">Other</option>
            </select>
        </div>
        <div class="mb-3">
            <label asp-for="NextOfKinPhone" style="font-size: 20px; font-weight: bold;">Next of Kin Phone Number</label>
            <textarea asp-for="NextOfKinPhone" style="width: 800px; resize: none;" class="form-control autoresize" ></textarea>
        </div>
        <div class="mb-3">
            <label asp-for="NextOfKinEmail" style="font-size: 20px; font-weight: bold;">Next of Kin Email</label>
            <input asp-for="NextOfKinEmail" id="phoneNumberInput" style="width: 800px" class="form-control" />
        </div>
        <div class="mb-3">
            <label style="font-size: 20px; font-weight: bold;">Citizenship</label>
            <select asp-for="Citizenship" class="form-control" id="citizenshipDropdown" onchange="showInput()">
                <option value="">-- Select Citizenship --</option>
                <option value="South African Citizen">South African Citizen</option>
                <option value="Non-South African Citizen">Non-South African Citizen</option>
            </select>
            <span asp-validation-for="Citizenship" class="text-danger"></span>
        </div>

        <div class="mb-3" id="idInput" style="display: none;">
            <label style="font-size: 20px; font-weight: bold;">ID Number</label>
            <input asp-for="ID_Number" class="form-control" oninput="validateInput(this)" />
        </div>

        <div class="mb-3" id="passportInput" style="display: none;">
            <label style="font-size: 20px; font-weight: bold;">Passport Number</label>
            <input asp-for="Passport_Number" class="form-control" />
        </div>


        <div class="mb-3">
            <label asp-for="Role" style="font-size: 20px; font-weight: bold;">Role</label>
            <select asp-for="Role" class="form-control" autocomplete="Role" aria-required="true" onchange="showRole(this)">
                <option value="">--Select Role--</option>
                <option value="Patient">Patient</option>
                <option value="Administrator">Administrator</option>
                <option value="PHC Worker">PHC Worker</option>
            </select>
            <span asp-validation-for="Role" class="text-danger"></span>
        </div>

        <div id="phc-options" style="display:none">
            <div class="mb-3" >
                <label asp-for="PHC_Role" style="font-size: 20px; font-weight: bold;">PHC Role</label>
                <select asp-for="PHC_Role" class="form-control" autocomplete="PHCRole">
                    <option value="">--Select PHC Role--</option>
                    <option value="Counsellor">Counsellor</option>
                    <option value="Doctor">Doctor</option>
                    <option value="Nurse">Nurse</option>
                    <option value="Obstetrician">Obstetrician</option>
                </select>
            </div>

            <div class="mb-3">
                <label asp-for="PHC_License_Number" style="font-size: 20px; font-weight: bold;">PHC License Number</label>
                <input asp-for="PHC_License_Number" class="form-control" autocomplete="PHCID" placeholder="phc license number" />
            </div>
        </div>

        <div class="mb-3">
            <label asp-for="Occupation" style="font-size: 20px; font-weight: bold;">Occupation</label>
            <input asp-for="Occupation" class="form-control" autocomplete="username" aria-required="true" placeholder="occupation" />
            <span asp-validation-for="Occupation" class="text-danger"></span>
        </div>

        <br /><br />
        <button type="submit" class="btn btn-primary text-danger" style="width:200px">Update</button>
        &nbsp;&nbsp;

        <a asp-controller="Administrators" asp-action="PrenatalManageUsers" class="btn btn-primary" style="width:200px">Back to Record List</a>
    </div>
</form>


<script>
    const textareas = document.querySelectorAll('.autoresize');

    function resizeTextarea(event) {
        const textarea = event.target;
        textarea.style.height = 'auto';
        textarea.style.height = textarea.scrollHeight + 'px';
    }

    textareas.forEach((textarea) => {
        textarea.addEventListener('input', resizeTextarea);
        textarea.dispatchEvent(new Event('input'));
    });
    var nextOfKinPhoneInput = document.getElementById("nextOfKinPhoneInput");
    var phoneNumberInput = document.getElementById("phoneNumberInput");

    function updateMaxLength(input, prefix, maxLen) {
        var value = input.value.trim();

        if (value.startsWith(prefix)) {
            input.maxLength = maxLen;
        } else {
            input.maxLength = 50; // Change 50 to your desired default maximum length
        }
    }

    nextOfKinPhoneInput.addEventListener("input", function () {
        updateMaxLength(this, "+27", 13);
    });

    phoneNumberInput.addEventListener("input", function () {
        updateMaxLength(this, "+27", 13);
        updateMaxLength(this, "0", 10);
    }

        function showRole(sel) {
            var phcOptions = document.getElementById("phc-options");
            if (sel.value === "PHC Worker") {
                phcOptions.style.display = "block";
            } else {
                phcOptions.style.display = "none";
            }
        }

        function showInput() {
            var citizenshipDropdown = document.getElementById("citizenshipDropdown");
            var idInput = document.getElementById("idInput");
            var passportInput = document.getElementById("passportInput");

            if (citizenshipDropdown.value === "South African Citizen") {
                idInput.style.display = "block";
                passportInput.style display = "none";
            } else if (citizenshipDropdown.value === "Non-South African Citizen") {
                idInput.style.display = "none";
                passportInput.style.display = "block";
            } else {
                idInput.style.display = "none";
                passportInput.style.display = "none";
            }
        }

        function showSection(sectionId) {
            const sections = ['section1', 'section2', 'section3', 'section4', 'section5'];
            for (const section of sections) {
                document.getElementById(section).style.display = 'none';
            }
            document.getElementById(sectionId).style.display = 'block';
        }

        function validateInput(input) {
            input.value = input.value.replace(/\D/g, '').slice(0, 13);
        }
</script>

@section Scripts{
    @{
        <partial name="_ValidationScriptsPartial" />
    }
}